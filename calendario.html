<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Déjate de Historias</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="logo.ico" sizes="16x16">
    <link rel="icon" type="image/png" href="logo.ico" sizes="32x32">
    <link rel="icon" type="image/png" href="logo.ico" sizes="48x48">
    <link rel="apple-touch-icon" href="logo.ico">
    <link rel="stylesheet" href="styles.css">

</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html">Déjate de Historias</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Inicio</a></li>
                    <li class="nav-item"><a class="nav-link" href="historia.html">Historia</a></li>
                    <li class="nav-item"><a class="nav-link" href="calendario.html">Acontecimientos</a></li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Descubre
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="articulos.html">Historia Bélica</a>
                            <a class="dropdown-item" href="contacto.html">Edad Media</a>
                            <a class="dropdown-item" href="contacto.html">Leyendas</a>
                            <a class="dropdown-item" href="contacto.html">Europa</a>
                            <a class="dropdown-item" href="contacto.html">Prehistoria Humana</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="descubre.html">Descubre Más...</a>
                        </div>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="creadores.html">Sobre los Creadores</a></li>
                    <!--<li class="nav-item"><a href="https://ddhhyt.github.io/newsletter/" class="nav-link">Newsletter</a></li>-->
                </ul>

            </div>
        </div>
    </nav>

    <div class="bg-image text-center">
        <h1 class="custom-header mt-4"></h1>
    </div>

    <div class="alert alert-warning alert-dismissible fade show text-center" role="alert">
        <strong>¡Atención!</strong> La página web está en fase de desarrollo y se irán añadiendo más contenidos. Se
        espera que esté completamente disponible aproximadamente en marzo de 2025.
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="text-center">
                    <h3 id="event-date"></h3>
                    <div id="event-description" class="alert alert-info mt-3" style="display: none;"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="container text-center">
        <form class="form-inline justify-content-center my-2 my-lg-0">
            <input class="form-control form-control-lg mr-sm-2" type="search" placeholder="Explora historias perdidas..."
                style="width: 400px;" aria-label="Buscar">
            <button class="btn btn-outline-success btn-lg my-2 my-sm-0" type="submit">Buscar</button>
        </form>
    </div>

    <div class="container-fluid mt-5">
        <div class="row">
            <div class="col-12">
                <h2 class="text-center mb-4">Calendario Acontecimientos Históricos</h2>
                <div class="text-center mb-3">
                    <button id="prevMonth" class="btn btn-primary mr-2">Mes Anterior</button>
                    <button id="nextMonth" class="btn btn-primary">Mes Siguiente</button>
                </div>
                <div id="calendar" class="text-center">
                    <!-- Aquí se generará el calendario -->
                </div>
            </div>
        </div>
    </div>

    <div class="container mt-5">
        <h1 class="my-4">Buscar Eventos Históricos</h1>
        <div class="input-group mb-3">
            <input type="text" id="search" class="form-control" placeholder="Ingrese una fecha o evento">
            <div class="input-group-append">
                <button class="btn btn-primary" onclick="buscarEvento()">Buscar</button>
            </div>
        </div>
        <div id="resultados"></div>
    </div>

    <footer class="bg-dark text-white text-center py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <ul class="list-inline">
                        <li class="list-inline-item">
                            <a href="https://www.instagram.com/ddh_yt/">
                                <img src="img/instagram.png" alt="Instagram" class="img-fluid" style="width: 60px;">
                            </a>
                        </li>
                        <li class="list-inline-item">
                            <a href="https://twitter.com/tu_perfil">
                                <img src="img/twitter.jpeg" alt="Twitter" class="img-fluid" style="width: 60px;">
                            </a>
                        </li>
                        <li class="list-inline-item">
                            <a href="https://www.youtube.com/@ddh_yt">
                                <img src="img/yt.png" alt="YouTube" class="img-fluid" style="width: 60px;">
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <img src="img/logo.jpg" alt="Déjate de Historias" class="img-fluid rounded-circle"
                        style="width: 150px;">
                    <h2 class="mt-2">Déjate de Historias</h2>
                </div>
                <div class="col-md-4">
                    <ul class="list-unstyled">
                        <li><a href="curiosidades.html" class="text-white">Curiosidades</a></li>
                        <li><a href="calendario.html" class="text-white">Acontecimientos</a></li>
                        <li><a href="noticias.html" class="text-white">Noticias</a></li>
                        <li><a href="creadores.html" class="text-white">Sobre los creadores</a></li>
                    </ul>
                </div>
            </div>
            <div class="mt-4">
                <img src="img/CCBYNCND.png" alt="CCBYNCND" class="img-fluid" style="width: 100px;">
                <p class="mt-2">Attribution-NonCommercial-NoDerivatives 3.0 IGO</p>
                <p>© Déjate de Historias 2025</p>
            </div>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function () {
            // Datos de ejemplo para texto por día
            var events = {
                "2-1": "Evento especial el 1 de febrero",
                "3-15": "Otro evento el 15 de marzo",
                // Puedes agregar más eventos aquí según sea necesario
            };

            // Nombres de los meses
            var monthNames = [
                "Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio",
                "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"
            ];

            // Función para generar el calendario de un mes específico
            function generateCalendar(monthIndex) {
                var calendarHtml = '<h3 class="mb-3">' + monthNames[monthIndex] + '</h3>';
                calendarHtml += '<table class="table table-bordered small-calendar">';
                calendarHtml += '<tbody>';

                // Determinar el número de días en el mes
                var daysInMonth = getDaysInMonth(2024, monthIndex + 1); // Año bisiesto

                // Lógica para generar días del mes
                var dayCounter = 1;
                var startDay = new Date(2024, monthIndex, 1).getDay(); // Día de la semana en que empieza el mes (0 = Domingo, 1 = Lunes, ...)
                var numRows = Math.ceil((daysInMonth + startDay) / 7);

                for (var i = 0; i < numRows; i++) {
                    calendarHtml += '<tr>';
                    for (var j = 0; j < 7; j++) {
                        var dayNumber = i * 7 + j - startDay + 1;
                        if (dayNumber > 0 && dayNumber <= daysInMonth) {
                            calendarHtml += '<td>';
                            var dateKey = (monthIndex + 1) + '-' + dayNumber;
                            calendarHtml += '<button class="btn btn-outline-secondary calendar-day" data-day="' + dayNumber + '">' + dayNumber + '</button>';
                            calendarHtml += '</td>';
                        } else {
                            calendarHtml += '<td></td>';
                        }
                    }
                    calendarHtml += '</tr>';
                }

                calendarHtml += '</tbody></table>';
                $('#calendar').html(calendarHtml);

                // Mostrar alerta al hacer clic en un día
                $('.calendar-day').click(function () {
                    var day = $(this).data('day');
                    var dateKey = (monthIndex + 1) + '-' + day;
                    var event = events[dateKey];
                    if (event) {
                        alert(event);
                    } else {
                        alert('No hay eventos para este día.');
                    }
                });
            }

            // Función para obtener el número de días en un mes específico (teniendo en cuenta el año bisiesto)
            function getDaysInMonth(year, month) {
                return new Date(year, month, 0).getDate();
            }

            // Inicializar calendario con el primer mes (enero: índice 0)
            generateCalendar(0);

            // Botones para cambiar de mes
            var currentMonthIndex = 0; // Iniciar con enero
            $('#prevMonth').click(function () {
                currentMonthIndex = (currentMonthIndex === 0) ? 11 : currentMonthIndex - 1;
                generateCalendar(currentMonthIndex);
            });

            $('#nextMonth').click(function () {
                currentMonthIndex = (currentMonthIndex === 11) ? 0 : currentMonthIndex + 1;
                generateCalendar(currentMonthIndex);
            });
        });

        // Funciones para buscar eventos
        async function cargarEventos() {
            const response = await fetch('eventos.json');
            const eventos = await response.json();
            return eventos;
        }

        async function buscarEvento() {
            const query = document.getElementById('search').value.toLowerCase();
            const eventos = await cargarEventos();
            const resultados = eventos.filter(evento =>
                evento.mes.toLowerCase().includes(query) ||
                evento.fecha.includes(query) ||
                evento.evento.toLowerCase().includes(query)
            );

            const resultadosDiv = document.getElementById('resultados');
            resultadosDiv.innerHTML = '';

            if (resultados.length > 0) {
                resultados.forEach(evento => {
                    const eventoDiv = document.createElement('div');
                    eventoDiv.className = 'event';
                    eventoDiv.textContent = `${evento.mes}: ${evento.fecha}: ${evento.evento}`;
                    resultadosDiv.appendChild(eventoDiv);
                });
            } else {
                resultadosDiv.textContent = 'No se encontraron eventos.';
            }
        }

        // Añadir evento para detectar la tecla "Enter"
        document.getElementById('search').addEventListener('keyup', function (event) {
            if (event.key === 'Enter') {
                buscarEvento();
            }
        });
    </script>
</body>

</html>
